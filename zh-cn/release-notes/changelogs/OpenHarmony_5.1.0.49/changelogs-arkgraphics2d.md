# ArkGraphics2D变更说明

## cl.arkgraphics2d 新增非法unicode显示优化

**访问级别**

公开接口

**变更原因**

一段文本中包含非法unicode时会导致整段文本不显示，为了进一步提升文字显示效果，新增提供显示优化，会使用�（/ufffd）代替所有非法字符。

**变更影响**

一些特殊字符或emoji表情符号，在文本中以成对的unicode表示，这种表示方式称之为代理对（Surrogate Pair）。代理对由一个高位代理（0XD800 - 0XDBFF）和一个低位代理（0XDC00 - 0XDFFF）组成，例如`\uD83D\uDE00`显示为😀。当高位代理和低位代理没有正确配对，或顺序不正确时，就呈现非法unicode字符。

此次显示优化仅针对非法unicode场景，若文本中不涉及非法unicode，则无需适配。

变更前，如果应用中出现在非法unicode会导致整段文本不显示。
变更后，如果应用中出现在非法unicode，非法unicode由`/ufffd`代替，替换完成后段落文本显示。

**起始 API Level**

16

**变更发生版本**

OpenHarmony SDK 5.0.1.49 版本开始。

**变更的接口/组件**

所有文本绘制相关组件及接口。

**适配指导**

此次显示优化仅针对非法unicode场景，若文本中无非法unicode，则无需适配。
若渲染文字中出现�，开发者需要根据实际场景决定是否修改原文非法unicode或保持字体引擎渲染后的效果。